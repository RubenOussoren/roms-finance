# frozen_string_literal: true

class Provider::{{CLASS_NAME}} < Provider
  {{CONCEPT_INCLUDE}}

  {{PUBLIC_METHODS}}

  private

  def client
    @client ||= {{CLIENT_CLASS}}.new(
      api_key: settings.api_key,
      base_url: settings.base_url
    )
  end

  def with_provider_response(&block)
    Provider::ProviderResponse.new(
      success: true,
      data: yield
    )
  rescue ProviderError => e
    Provider::ProviderResponse.new(
      success: false,
      error: e.message
    )
  rescue StandardError => e
    Provider::ProviderResponse.new(
      success: false,
      error: "Unexpected error: #{e.message}"
    )
  end
end
